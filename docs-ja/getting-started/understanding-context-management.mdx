---
title: "コンテキスト管理"
description: "Clineを最大限活用するためのコンテキストが鍵となります"
---

> **クイックリファレンス**
>
> -   コンテキスト = Clineがあなたのプロジェクトについて知っている情報
> -   コンテキストウィンドウ = Clineが一度に保持できる情報量
> -   プロジェクトの知識を維持するためにコンテキストファイルを使用する
> -   コンテキストウィンドウがいっぱいになったらリセットする

## コンテキストとコンテキストウィンドウの理解

<Frame caption="無限のコンテキストの世界において、コンテキストウィンドウはClineが現在利用可能な情報です">
	<img
		src="https://storage.googleapis.com/cline_public_images/docs/assets/image%20(2).png"
		alt="無限のコンテキストの世界において、コンテキストウィンドウはClineが現在利用可能な情報です"
	/>
</Frame>

Clineとの作業は、徹底的で積極的なチームメイトとの協力のようなものと考えてください：

### コンテキストの構築方法

Clineは2つの方法でアクティブにコンテキストを構築します：

1. **自動的なコンテキスト収集（Cline主導）**
    - 関連ファイルを積極的に読み取る
    - プロジェクト構造を探索する
    - パターンと関係性を分析する
    - 依存関係とインポートをマッピングする
    - 明確化のための質問をする
2. **ユーザーガイドのコンテキスト**
    - 特定のファイルを共有する
    - ドキュメントを提供する
    - Clineの質問に答える
    - 焦点エリアをガイドする
    - 設計の考えと要件を共有する

**重要なポイント**: Clineは受動的ではありません - あなたのプロジェクトを理解することを積極的に求めます。特に[プランモード](/features/plan-and-act)では、Clineに探索させるか、その焦点をガイドするかを選択できます。

### コンテキストとコンテキストウィンドウ

コンテキストを、あなたとClineが共有するホワイトボードのように考えてください：

-   **コンテキスト**は利用可能なすべての情報です：
    -   Clineが発見したもの
    -   あなたが共有したもの
    -   会話履歴
    -   プロジェクトの要件
    -   以前の決定事項
-   **コンテキストウィンドウ**はホワイトボード自体のサイズです：
    -   トークンで測定されます（1トークン ≈ 英単語の3/4）
    -   各モデルには固定サイズがあります：
        -   Claude Sonnet 4: 1,000,000トークン
        -   Qwen3 Coder: 256,000トークン
        -   Gemini 2.5 Pro: 1,000,000+トークン
        -   GPT-5: 400,000トークン
    -   ホワイトボードがいっぱいになると、Clineは自動的に会話を要約してスペースを空けます

**重要**: 大きなコンテキストウィンドウを持っているからといって、それを完全に埋める必要があるわけではありません。モデルは、より高い制限を主張していても、400-500Kトークン付近で劣化し始めます。散らかったホワイトボードのように、情報が多すぎると重要なものに焦点を当てることが困難になります。

## コンテキストウィンドウプログレスバーの理解

Clineは、プログレスバーを通じてコンテキストウィンドウの使用状況を監視する視覚的な方法を提供します：

<Frame caption="コンテキストウィンドウ使用状況の視覚的表現">
	<img
		src="https://storage.googleapis.com/cline_public_images/docs/assets/image%20(1)%20(1).png"
		alt="コンテキストウィンドウプログレスバー"
	/>
</Frame>

### バーの読み方

-   ↑は入力トークン（LLMに送信したもの）を示します
-   ↓は出力トークン（LLMが生成したもの）を示します
-   プログレスバーは、コンテキストウィンドウをどの程度使用したかを視覚化します
-   合計は、モデルの最大容量を示します（例：Claude Sonnet 4の場合1M）

### バーを監視するタイミング

-   長時間のコーディングセッション中
-   複数のファイルで作業している時
-   複雑なタスクを開始する前
-   Clineがコンテキストを失っているように見える時

**ヒント**: [自動コンパクト](/features/auto-compact)により、Clineは長い会話を自動的に処理できるようになりました。[フォーカスチェーン](/features/focus-chain)と組み合わせることで、進捗を失うことなく複数のコンテキストウィンドウにまたがる複雑なプロジェクトで作業できます。

## 自動コンテキスト管理

Clineには、コンテキストを自動的に管理するインテリジェントな機能が含まれています：

### 保持すべきデフォルト設定

**フォーカスチェーン** - v3.25でデフォルトで有効。Clineはタスク開始時にToDoリストを生成し、スレッドがドリフトしないようにコンテキスト内に保持します。マークダウンを編集してステップを追加または並び替えでき、Clineはそれに適応します。[フォーカスチェーンの詳細](/features/focus-chain)。

**自動コンパクト** - 常にオン。コンテキストウィンドウが制限に達すると、Clineは包括的な要約を作成し、肥大化した履歴を置き換え、中断したところから継続します。決定、コード変更、状態は保持されます。[自動コンパクトの詳細](/features/auto-compact)。

## 高度なコンテキストツール

コンテキスト管理をより細かく制御する必要がある場合：

### 深い計画（`/deep-planning`）
実質的な機能、リファクタリング、またはインテグレーションに対して。Clineはコードベースを調査し、対象を絞った質問をしてから、`implementation_plan.md`を書きます。精製された高価値コンテキストで新しいタスクを作成します。[深い計画の詳細](/features/slash-commands/deep-planning)。

### 新しいタスク（`/newtask`）
自然な移行ポイントで、重要なものだけを新しいタスクにパッケージします。調査後の実装のためのクリーンスレート、またはチームメイト間のクリスプなハンドオフ。[新しいタスクの詳細](/features/slash-commands/new-task)。

### Smol（`/smol`）
勢いを保つために会話をその場で圧縮します。フローを壊したくないデバッグまたは探索作業中に最適です。[Smolの詳細](/features/slash-commands/smol)。

### メモリバンク + .clinerules
重要でないプロジェクトに対して。メモリバンクは、プロジェクトの知識をリポジトリ内のMarkdownとしてキャプチャします。`.clinerules`は、Clineの動作をチームと整合させるバージョン管理された指示です。[メモリバンクの詳細](/prompting/cline-memory-bank)と[Clineルール](/features/cline-rules)。

## コンテキストファイルの使用

コンテキストファイルは、セッション間での理解を維持するのに役立ちます。これらは、AIアシスタントがプロジェクトを理解するのを助けるために特別に設計されたドキュメントとしての役割を果たします。

#### コンテキストファイルへのアプローチ

1. **常緑プロジェクトコンテキスト（メモリバンク）**
    - プロジェクトとともに進化する生きたドキュメント
    - アーキテクチャとパターンが出現するにつれて更新される
    - 例：メモリバンクパターンは、`techContext.md`や`systemPatterns.md`などのファイルを維持します
    - 長期間のプロジェクトとチームに有用
2. **タスク固有のコンテキスト**

    - 特定の実装タスク用に作成される
    - 要件、制約、決定を文書化する
    - 例：

        ```markdown
        # auth-system-implementation.md

        ## 要件

        -   OAuth2実装
        -   GoogleとGitHubのサポート
        -   認証エンドポイントでのレート制限

        ## 技術的決定

        -   プロバイダー統合にPassport.jsを使用
        -   セッション管理にJWT
        -   レート制限にRedis
        ```

3. **知識移転ドキュメント**
    - プランモードに切り替えて、これまでに達成したすべてのことと残りのステップを、マークダウンファイルに文書化するようClineに依頼します。
    - マークダウンファイルの内容をコピーします。
    - その内容をコンテキストとして使用して新しいタスクを開始します。

#### コンテキストファイルを効果的に使用する

1. **構造とフォーマット**
    - 明確で一貫した組織を使用する
    - 関連する例を含める
    - 関連する概念をリンクする
    - 情報を焦点を絞って保つ
2. **メンテナンス**
    - 重要な変更の後に更新する
    - コンテキストファイルをバージョン管理する
    - 古い情報を削除する
    - 重要な決定を文書化する

## 実践的なヒント

1. **新しいプロジェクトの開始**
    - Clineにコードベースを探索させる
    - 構造とパターンに関する質問に答える
    - 基本的なコンテキストファイルの設定を検討する
    - 重要な設計決定を文書化する
2. **継続的な開発**
    - 重要な変更でコンテキストファイルを更新する
    - 関連するドキュメントを共有する
    - 複雑な議論にはプランモードを使用する
    - 必要に応じて新しいセッションを開始する
3. **チームプロジェクト**
    - 共通のコンテキストファイルを共有する（プロジェクトルートで[.clinerules](/features/cline-rules)ファイルの使用を検討）
    - アーキテクチャの決定を文書化する
    - 一貫したパターンを維持する
    - ドキュメントを最新に保つ

## ボーナスコンテキストヒント

- @リンクを使用して、ウェブページのコンテキストをClineに追加できます（ドキュメント、ブログなど）
- MCPサーバーを利用して、外部ナレッジベースからコンテキストを取得する
- 画像入力をサポートするモデルでは、スクリーンショットをコンテキストとして使用できます

## まとめ

Clineは既にあなたのために多くのコンテキスト作業を行っています - [フォーカスチェーン](/features/focus-chain)、[自動コンパクト](/features/auto-compact)、および計画フローは、長期間にわたってスレッドを維持するように設計されています。目標は、Clineがセッション間でプロジェクトの一貫した理解を維持するのを助けることです。

覚えておいてください：目標は、各ステップで重要なもののみを視野に保つことです。
