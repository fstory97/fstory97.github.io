# Luke Yang - t03-2 백엔드 메시지 브랜딩 작업

**작업 기간**: 2025-08-31 ~ 2025-09-02  
**담당자**: Luke Yang  
**우선순위**: High  
**AI 어시스턴트**: Claude Code  
**상위 작업**: [t03 브랜딩 시스템 구현](./t03-branding-ui.md)의 2단계

## 🎯 작업 목적

### **왜 이 작업이 필요한가?**
현재 백엔드와 프론트엔드에 하드코딩된 "Cline" 메시지들이 브랜드 변환 스크립트(`brand-converter.js`)로 전환되지 않는 문제가 있음. 사용자가 Caret/CodeCenter 브랜드를 사용할 때도 여전히 "Cline wants to..." 메시지가 표시되어 브랜딩 일관성이 깨짐.

### **이 작업의 목표**
- 모든 하드코딩된 "Cline" 텍스트를 브랜드 변환 가능하게 만들기
- brand-converter.js로 일괄 변환 가능한 구조 구축

## 📊 현재 상태 (2025-09-02)

### ✅ **완료된 작업**
1. **복잡한 백엔드 i18n 시스템 제거**
   - 이전에 백엔드에 i18n을 적용하려는 시도를 했으나 복잡도가 증가하여 삭제하였음

### 🔍 **발견된 백엔드 하드코딩 메시지**

#### **백엔드 메시지 위치 (src/core/task/tools/handlers/)**
총 13개 파일에서 "Cline wants" 패턴 발견:
- `WriteToFileToolHandler.ts:269`: "Cline wants to edit/create"
- `ExecuteCommandToolHandler.ts:105`: "Cline wants to execute a command"
- `ReadFileToolHandler.ts:108`: "Cline wants to read"
- `ListFilesToolHandler.ts:97`: "Cline wants to view directory"
- `SearchFilesToolHandler.ts:109`: "Cline wants to search files"
- `BrowserToolHandler.ts:105`: "Cline wants to use a browser"
- `WebFetchToolHandler.ts:74`: "Cline wants to fetch content"
- `UseMcpToolHandler.ts:100`: "Cline wants to use tool"
- `AccessMcpResourceHandler.ts:93`: "Cline wants to access resource"
- `ListCodeDefinitionNamesToolHandler.ts:92`: "Cline wants to analyze code"
- `NewTaskHandler.ts:46`: "Cline wants to start a new task"
- `CondenseHandler.ts:40`: "Cline wants to condense"
- `ReportBugHandler.ts:75`: "Cline wants to create a github issue"

### **핵심 작업 (남은 것)**
1. **백엔드 하드코딩 텍스트를 브랜드 변환 가능하게 수정**
2. **brand-converter.js에 백엔드 파일 경로 추가**
3. **테스트 및 검증**


## 📝 작업 계획

### 🔄 1. brand-converter.js 개선 (진행 중)
- ✅ brand-config.json에 13개 백엔드 핸들러 파일 매핑 추가 완료
- ✅ brand-converter.js에 13개 백엔드 핸들러 파일 경로 추가 완료
- ❌ 파일명 기반 매핑 키 선택 로직 구현 필요 (processRulePathFile 함수에서 핸들러별 매핑 처리)

### 📋 2. 테스트 및 검증 (대기 중)
 2.1. brand-converter.js로 cline → caret 변환 테스트
 2.2. brand-converter.js로 caret → cline 역변환 테스트  
 2.3. 13개 백엔드 파일의 메시지가 정상 변환되는지 확인
 2.4. 개발자 확인 받기
 2.5. 커밋 및 푸시 (caret-merging과 caret-b2b 모두)

## 📋 구현 현황

### **brand-config.json에 추가된 매핑**
```json
"WriteToFileToolHandler_ts": { "Cline wants to": "Caret wants to" }
"ExecuteCommandToolHandler_ts": { "Cline wants to execute a command:": "Caret wants to execute a command:" }
"ReadFileToolHandler_ts": { "Cline wants to read": "Caret wants to read" }
"ListFilesToolHandler_ts": { "Cline wants to view directory": "Caret wants to view directory" }
"SearchFilesToolHandler_ts": { "Cline wants to search files for": "Caret wants to search files for" }
"BrowserToolHandler_ts": { "Cline wants to use a browser and launch": "Caret wants to use a browser and launch" }
"WebFetchToolHandler_ts": { "Cline wants to fetch content from": "Caret wants to fetch content from" }
"UseMcpToolHandler_ts": { "Cline wants to use": "Caret wants to use" }
"AccessMcpResourceHandler_ts": { "Cline wants to access": "Caret wants to access" }
"ListCodeDefinitionNamesToolHandler_ts": { "Cline wants to analyze code definitions in": "Caret wants to analyze code definitions in" }
"NewTaskHandler_ts": { "Cline wants to start a new task...": "Caret wants to start a new task..." }
"CondenseHandler_ts": { "Cline wants to condense the conversation...": "Caret wants to condense the conversation..." }
"ReportBugHandler_ts": { "Cline wants to create a github issue...": "Caret wants to create a github issue..." }
```

### **brand-converter.js에 추가된 파일 경로**
- 13개 백엔드 핸들러 파일이 `convertRulePaths()` 함수에 추가됨
- `processRulePathFile()` 함수에서 파일명 기반으로 적절한 매핑 섹션 자동 선택

