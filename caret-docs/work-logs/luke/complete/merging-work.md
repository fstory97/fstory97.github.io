# Caret 머징 작업

## 작업 개요

본 문서는 Caret 프로젝트의 체계적인 머징 작업을 위한 종합 가이드입니다.

### 프로젝트 배경
- **기반 프로젝트**: Cline v3.17.13을 fork하여 개발
- **현재 원본**: `/caret-main` 디렉토리에 보관
- **목표 버전**: Cline v3.26.6 (commit: c6aa47095ee47036946c6a51339a4fa22aaa073c)

### 이전 머징 시도의 문제점
- Cline 3.25.2 머징 과정에서 실패 (caret-compare에 보관)
- 세밀한 단계 구분 없이 일괄 머징 시도
- 불완전한 상태에서 머징으로 인한 충돌 발생

### 새로운 머징 전략
1. **깨끗한 베이스**: 최신 Cline 버전을 깨끗하게 다운로드
2. **히스토리 연결**: 기존 히스토리 유지하면서 세분화된 단계별 진행
3. **최소 수정 원칙**: Cline 코드 수정을 최소화하고 Caret 기능 추가
4. **정기 머징 준비**: 향후 지속적인 머징이 가능한 구조 구축

## 참고 문서

- **머징 전략 가이드**: `caret-docs/guides/merging-strategy-guide.md`
- **전략 검토 보고서**: `caret-docs/보고서(reports)/프로젝트 개선/AI 바이브 코딩 시대의 오픈소스 Caret 머징 전략 검토 보고서-20250826.md`

## 머징 대상 기능 (8개 Feature)

### f01 - 공통 유틸리티 및 배포 스크립트
- **목적**: 백엔드/프론트엔드 공통 유틸리티, 배포 스크립트 라이브러리
- **범위**: 필요한 유틸리티 함수 및 헬퍼 및 배포 스크립트 이식
- **상태**: ✅ 완료

### f02 - 다국어 지원 (i18n)
- **목적**: 한국어, 영어, 일본어, 중국어 지원
- **범위**: 브랜딩을 고려한 다국어 설정 시스템
- **상태**: ✅ 완료 (기반 시스템)

### f03 - 브랜딩 및 UI 시스템
- **목적**: Cline 브랜딩을 Caret으로 대체
- **범위**: 다국어 지원을 포함한 완전한 브랜딩 교체
- **상태**: 📋 대기중

### f04 - Caret 계정 시스템
- **목적**: Cline 프로바이더 대체 (cline.bot → caret.team)
- **범위**: Auth0 기반 독립적인 계정 관리 시스템
- **상태**: 📋 대기중

### f05 - 규칙 우선순위 시스템
- **목적**: 다중 규칙 파일 우선순위 관리
- **우선순위**: `.caretrules > .clinerules > .cursorrules > .windsurfrules`
- **상태**: 📋 대기중

### f06 - JSON 시스템 프롬프트
- **목적**: 토큰 효율성을 위한 JSON 기반 동적 프롬프트
- **효과**: 기존 대비 15% 토큰 사용량 절약
- **상태**: 📋 누락 (파일 없음)

### f07 - Chatbot/Agent 모드
- **목적**: Plan/Act 모드를 대체하는 직관적인 모드 시스템
- **Chatbot 모드**: 분석과 조언 중심 (개발자 주도)
- **Agent 모드**: 계획과 실행 통합 (AI 주도, 대화 가능)
- **상태**: 📋 대기중

### f08 - 페르소나 시스템
- **목적**: AI 캐릭터 페르소나를 통한 개인화된 경험
- **범위**: 대화창 캐릭터, 워크스페이스 설정, persona.md 템플릿 지원
- **상태**: 📋 대기중

### f09 - i18n UI 통합 및 전체 번역 점검
- **목적**: 모든 웹뷰 컴포넌트에 i18n 시스템 통합 및 번역 품질 점검
- **범위**: 전체 UI 컴포넌트 번역 적용, 자동화 도구 구현
- **의존성**: f02 완료 필요
- **상태**: 📋 대기중

## 작업 진행 방식

각 기능별로 독립적인 작업 파일을 생성하여 체계적으로 진행:
- **파일 위치**: `caret-docs/work-logs/luke/`
- **파일 명명**: `f01-common-util.md`, `f02-logging-system.md`, ... `f09-persona-system.md`

이 구조를 통해 각 기능의 머징 진행 상황을 개별적으로 추적하고 관리할 수 있습니다.

## 머징 작업 방법
- 사전 숙지 문서 : 
 - **머징 전략 가이드**: `caret-docs/guides/merging-strategy-guide.md`
    -> cline의 최소화 변경을 하여 머징하고 개발하는 방법에 대한 가이드입니다. cline변경은 최소화 합니다. cline소스 수정시 CARET주석을 달아서 머징 블럭을 인지할 수 있게 합니다. caret의 신규 소스는 반드시 프론트와 백엔드의 각자 caret디렉토리에 위치합니다. 이 모든 작업은 머징을 용이하기 위한 구조로 꼭 지켜야 합니다.

### 주석 원칙 (Comments Guidelines)

#### CARET MODIFICATION 주석
- Caret 기능 추가로 인한 Cline 코드 수정 시 사용
- 예: `// CARET MODIFICATION: 한국어 i18n 지원을 위한 locale 설정 추가`

#### CLINE BUG FIX 주석  
- Cline 자체의 버그나 타입 오류 수정 시 사용
- Caret 기능과는 무관한 순수 Cline 코드 수정
- 예: `// CLINE BUG FIX: TypeScript 타입 충돌 해결을 위한 타입 캐스팅`
- 예: `// CLINE BUG FIX: VSCode API 호환성을 위한 누락된 속성 추가`

이 구분을 통해 향후 Cline 업스트림 머징 시 어떤 수정사항이 Caret 고유 기능인지, 일반적인 버그 수정인지 명확하게 구분할 수 있습니다.

 - f**- : 사용자가 지정한 작업 목표, 어떤 기능을 머징 작업하는지 인지합니다. 머징 완료후에는 다시 이 문서를 업데이트하여 최종 머징된 결과가 이 목표와 맞는지 점검해야 합니다.

 - **ai 작업 가이드** : `caret-docs/development/ai-work-index.mdx`  
    머징 작업 범위에 따라서 중점적으로 읽어야 할 개발 문서들이 있습니다.

 - t**- : 작업 문서로 진행할 작업에 대한 기록을 합니다. 먼저 계획을 세워서 이 문서에 작성을 하고 사용자에게 먼저 허락을 받아, 작업시에는 진척율을 알 수 있게 업데이트하며, 사용자가 특정 단계별로 보고를 요구하면 꼭 지켜, 작업이 중단되도 AI가 이 문서를 통해 최대한 재개할 수 있도록 현행화를 중요하게 합니다. 

ex) 위의 머징 작업을 지시시키는 사용자의 메시지 
 `@f01-common-util.mdx 작업을 하려고해 @merging-work.md  에 따라 작업 진행해줘. @t01-common-util.md 을 작업 문서로 사용해`