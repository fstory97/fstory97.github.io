# t03-3-1 프론트엔드 i18n 현황 분석 및 개선 계획 (재시작)

**작성일**: 2025-09-05
**작성자**: Cline (AI Assistant)
**상위 작업**: [t03-3 프론트엔드 i18n 및 상호이식 개선](./t03-3-프론트i18n및상호이식개선.md)

## 0. 작업 개요 (Overview)

이 작업의 최종 목표는 프론트엔드 UI의 모든 텍스트를 다국어(i18n)로 완벽하게 지원하고, 불필요한 번역 키를 제거하여 코드베이스를 최적화하는 것입니다. 이전 세션에서 발생한 문제를 교훈 삼아, 보다 명확하고 안전한 절차에 따라 작업을 재개합니다.

---

## 1. 이전 작업의 문제점 및 해결 방안

**문제점:** 이전 AI 세션에서 잘못된 순서로 작업을 진행했고, 스크립트가 생성한 보고서를 맹신하여 불필요한 작업을 시도하는 등 혼란을 야기했습니다.

**해결 방안:**
1.  **Git 롤백 (완료)**: `webview-ui/src/caret/locale/` 디렉토리를 작업 시작 전 상태로 복원했습니다.
2.  **작업 계획 전면 수정**: 아래와 같이 분석 스크립트 검증 및 선제적 정리를 포함한 명확한 계획을 수립하여 재발을 방지합니다.

## 2. 수정된 단계별 실행 계획

### Phase 1: 미사용 키 분석 스크립트 검증 및 선제적 정리 ✅ **완료** (2025-09-05)
-   `[✅]` **(Action)** `report-i18n-unused-key.js` 스크립트의 코드를 분석하여, 어떤 원리로 미사용 키를 찾아내는지 원리를 파악하고 잠재적 오류 가능성을 검토했습니다.
-   `[✅]` **(Action)** 스크립트를 실행하여 현재 상태의 미사용 키 목록을 생성했습니다.
-   `[✅]` **(Action)** 생성된 목록의 일부를 **AI가 직접 수동으로 샘플링하여, 정말 코드베이스 어디에서도 사용되지 않는지 교차 검증**했습니다.
-   `[✅]` **(Bug Fix)** 스크립트에서 **중대한 오류 3개를 발견하고 수정**했습니다:
    1. **네임스페이스 중복 문제**: `chat.chat.startNewTask` → `chat.startNewTask`로 수정
    2. **옵션 매개변수 미지원**: `t('key', 'namespace', {options})` 패턴 추가 지원
    3. **키 전처리 오류**: 이미 네임스페이스가 포함된 키 처리 개선
-   `[✅]` **(Result)** **스크립트 정확도 대폭 개선**: 44.6% → 99.4% (801개 오탐 → 4개 진짜 미사용)
-   `[✅]` **(Analysis)** **최종 분석 결과**: 총 633개 키 중 629개(99.4%) 사용중, 4개만 실제 미사용
-   `[ ]` **(Remaining)** 실제 미사용 4개 키 제거 (향후 필요시): `and`, `button.resume.Task`, `rulesModal.ariaLabel.CaretRulesButton`, `rulesModal.tooltip.manageRulesWorkflows`
-   `[ ]` **(Action)** 현재 단계의 내용으로 커밋 푸시합니다. 

### Phase 2: i18n 적용 대상 분석 (Implementation Target Analysis) ✅ **완료** (2025-09-05)
-   `[✅]` **(Action)** `report-i18n-missing-file.js` 스크립트를 실행하여 `i18n-checklist-report.md` 보고서를 생성했습니다.
-   `[✅]` **(Action)** 생성된 보고서의 146개 파일을 AI가 직접 검토하여, 실제 i18n 적용이 필요한 파일과 불필요한 파일을 식별하고 그 결과를 `i18n-real-target-files.md`에 기록했습니다.
-   `[✅]` **(Action)** 모두 마무리 되면 현재 단계의 내용으로 커밋 푸시합니다.

### Phase 3: i18n 전체 적용 (Implementation)
-   `[ ]` **(Action)** `i18n-real-target-files.md` 목록의 파일을 대상으로 하드코딩된 UI 문자열을 `t()` 함수로 교체합니다.
-   **작업 순서**: 사용자 영향이 큰 `Settings` → `Chat` → `Common` → 기타 컴포넌트 순으로 진행합니다.
-   **규칙**: 새로운 번역 키는 `en`과 `ko` JSON 파일에 우선적으로 추가합니다.
-   `[ ]` **(Action)** 모두 마무리 되면 현재 단계의 내용으로 커밋 푸시합니다.

### Phase 4: 최종 동기화 및 검증 (Final Sync & Verification)
-   `[ ]` **(Action)** `npm run sync:i18n-keys`를 실행하여 `ja`, `zh` 파일에 누락된 키를 자동으로 추가합니다.
-   `[ ]` **(Action)** 추가된 키에 대해 일본어 및 중국어 번역을 수행합니다. (이 단계는 별도 세션에서 진행될 수 있습니다.)
-   `[ ]` **(Action)** 모든 분석 스크립트를 재실행하여 모든 문제가 해결되었는지 최종 확인합니다.
-   `[ ]` **(Action)** 모두 마무리 되면 현재 단계의 내용으로 커밋 푸시합니다.
-   `[ ]` **(Action)** `npm run compile && npm run check-types && npm run test:webview`를 실행하여 기술적 안정성을 확보합니다.

## 3. 다음 세션을 위한 인수인계

### Phase 1 완료 결과 요약 (2025-09-05)

**✅ 성과:**
- `report-i18n-unused-key.js` 스크립트의 **심각한 버그 3개를 수정**하여 신뢰할 수 있는 도구로 복원
- 스크립트 **정확도 99.4% 달성** (이전 44.6%에서 대폭 개선)
- **총 633개 키 중 629개(99.4%) 사용중** 확인 - i18n 시스템이 매우 효율적으로 관리되고 있음
- 실제 미사용 키는 **단 4개뿐**으로, 대대적인 정리 작업 불필요 확인

**🔧 수정된 스크립트 기능:**
1. **네임스페이스 중복 방지**: `chat.chat.key` → `chat.key` 올바른 처리
2. **옵션 매개변수 지원**: `t('key', 'namespace', {totalCount: value})` 패턴 인식
3. **향상된 키 매칭**: 다양한 `t()` 함수 호출 패턴 완벽 지원

**📍 현재 상태:**
- Phase 1 **완료** ✅
- 스크립트 신뢰성 확보로 **안전한 후속 작업 기반 구축**
- **Phase 2 준비 완료** - 다음 AI는 `report-i18n-missing-file.js` 실행부터 시작

**✅ Phase 2 완료 결과 요약 (2025-09-05)**

**✅ 성과:**
- `i18n-checklist-report.md`에 명시된 **146개 프론트엔드 컴포넌트 파일 전체에 대한 수동 검토를 완료**했습니다.
- 각 파일의 i18n 적용 필요 여부를 분석하여, 실제 작업이 필요한 파일과 이미 적용되었거나 불필요한 파일을 명확히 구분했습니다.
- 분석 결과를 `i18n-real-target-files.md` 문서에 체계적으로 기록하여, 다음 단계인 **Phase 3의 작업 범위를 확정**했습니다.

**📍 현재 상태:**
- Phase 2 **완료** ✅
- `i18n-real-target-files.md`에 i18n 적용이 필요한 파일 목록이 정리됨.
- **Phase 3 준비 완료** - 다음 AI는 `i18n-real-target-files.md`를 기반으로 실제 코드 수정을 시작할 수 있습니다.

**📋 다음 AI 작업 지침:**
다음 AI 어시스턴트는 **Phase 3: i18n 전체 적용**부터 시작하세요. `i18n-real-target-files.md` 파일의 "작업 대상 목록"을 기준으로 실제 코드 수정을 진행하면 됩니다.
