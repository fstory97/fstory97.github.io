TDD 개발 접근법을 위한 포괄적인 테스팅 가이드에 액세스하고 있습니다.

<detailed_sequence_of_steps>
# 테스팅 가이드 - TDD 통합 우선 접근법

## 중요한 TDD 순서 (통합 우선)
🛑 **잘못된 접근법**:
1. 헬퍼 함수에 대한 단위 테스트 작성
2. 헬퍼 구현  
3. 나중에 실제 사용법에 통합

✅ **올바른 접근법**:
1. RED: 실제 사용 시나리오에 대한 통합/E2E 테스트 작성
2. GREEN: 통합 테스트를 통과시키는 데 필요한 모든 코드 구현  
3. REFACTOR: 통합 테스트를 통과시키면서 코드 품질 개선

## 테스트 환경 설정
- **프레임워크**: Vitest (Jest 아님)
- **빠른 명령어**: 
  - `npm run test:backend` (백엔드 테스트만)
  - `npm run test:webview` (웹뷰 테스트만)
- **절대 사용 금지**: `npm test` (너무 느림)
- **타입 체킹**: `npm run check-types`
- **컴파일**: `npm run compile`

## 테스트 파일 위치
- **백엔드 테스트**: `caret-src/__tests__/` (Caret 기능)
- **웹뷰 테스트**: `src/caret/**/*.test.tsx` (Caret UI 컴포넌트)
- **Cline 테스트**: `src/`의 기존 패턴 따르기

## TDD 예시 패턴
**웹뷰 기능 개발**:
- ❌ 잘못: `isValidInput()` 단위 테스트로 시작
- ✅ 올바름: "사용자 버튼 클릭 → 예상 결과 표시" 컴포넌트 테스트로 시작

**백엔드 기능 개발**:
- ❌ 잘못: `parseConfig()` 단위 테스트로 시작
- ✅ 올바름: "설정 변경 → 시스템 동작 변경" 통합 테스트로 시작

## 테스팅 전략
1. **통합 테스트**: 주요 초점, 실제 사용 시나리오
2. **컴포넌트 테스트**: 사용자 상호작용과 함께 React 컴포넌트 동작  
3. **단위 테스트**: 통합 테스트의 부산물, 시작점이 아님
4. **E2E 테스트**: Playwright로 전체 워크플로우 검증

## 검증 워크플로우
1. 실패하는 통합 테스트 작성 (RED)
2. 테스트 실행하여 실패 확인
3. 통과를 위한 최소 코드 구현 (GREEN)
4. 테스트 실행하여 성공 확인
5. 회귀 방지를 위한 전체 테스트 스위트 실행
6. 모든 테스트를 통과시키면서 리팩터링

## 테스트 커버리지 목표
- 새로운 Caret 기능에 대해 100% 커버리지
- 모든 사용자 대면 기능에 대한 통합 테스트 커버리지
- 모든 UI 상호작용에 대한 컴포넌트 테스트 커버리지

## 일반적인 테스팅 패턴
- **모킹**: 외부 종속성에 대한 Vitest 모킹 패턴
- **비동기 테스팅**: 테스트에서 적절한 async/await 처리
- **컴포넌트 테스팅**: React Testing Library 패턴
- **상태 테스팅**: 확장 상태 및 스토리지 테스팅
</detailed_sequence_of_steps>

<general_guidelines>
이 워크플로우는 개발자가 testing-guide.mdx 문서를 통해 갖는 것과 동일한 테스팅 지식에 AI가 접근할 수 있도록 제공합니다.

항상 격리된 단위 테스트가 아닌 실제 사용자 시나리오를 나타내는 통합 테스트로 시작하세요.

목표는 코드가 격리된 환경이 아닌 실제 사용 맥락에서 작동함을 보장하는 것입니다.
</general_guidelines>