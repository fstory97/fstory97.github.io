# Cline ì—…ìŠ¤íŠ¸ë¦¼ ë³‘í•© ê°€ì´ë“œ

Caretì€ Cline í”„ë¡œì íŠ¸ì˜ **Fork**ë¡œ, Clineì˜ ìµœì‹  ë³€ê²½ì‚¬í•­ì„ ì§€ì†ì ìœ¼ë¡œ í†µí•©í•˜ì—¬ ì•ˆì •ì„±ê³¼ ê¸°ëŠ¥ ê°œì„ ì„ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ë¬¸ì„œëŠ” **AI ì‹œëŒ€ì— ìµœì í™”ëœ** Cline upstream ë³‘í•© ì ˆì°¨ë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤.

## ğŸ¯ **í•µì‹¬ ì›ì¹™**

### **Fork ê¸°ë°˜ ì—…ìŠ¤íŠ¸ë¦¼ ë™ê¸°í™” ì „ëµ**

- **ğŸš€ Squash Merge ìš°ì„ **: ê°œë³„ commit ì¶©ëŒì„ í”¼í•˜ê³  ê¹”ë”í•œ íˆìŠ¤í† ë¦¬ ìœ ì§€
- **ğŸ¤– AI í˜‘ì—… ìµœì í™”**: ì˜ë¯¸ë¡ ì  ë‹¨ìœ„ ì‘ì—…ìœ¼ë¡œ AI ë„êµ¬ íš¨ìœ¨ì„± ê·¹ëŒ€í™”
- **ğŸ›¡ï¸ Caret ê¸°ëŠ¥ ë³´ì¡´**: Cline êµ¬ì¡° ìš°ì„  ì ìš© í›„ Caret ê³ ìœ  ê¸°ëŠ¥ ë³µì›
- **âš¡ ì—ëŸ¬ì˜ êµ¬ì¡°ì  í•´ê²°**: ì§€ì—½ì  ìˆ˜ì • ëŒ€ì‹  ê·¼ë³¸ ì›ì¸ ë¶„ì„ ë° ë²”ìœ„ í™•ì¥
- **ğŸ“‹ ì²´ê³„ì  ê²€ì¦**: ê° ë‹¨ê³„ë³„ ì™„ë£Œ ê¸°ì¤€ê³¼ ë¡¤ë°± ì§€ì  í™•ë³´

---

## ğŸš€ **Squash Merge ì „ëµ** (ê¶Œì¥ ë°©ë²•)

### **ì¥ì **

- âœ… **ê°œë³„ commit ì¶©ëŒ ì—†ìŒ**: 200ê°œ ì»¤ë°‹ë„ í•œ ë²ˆì— ì²˜ë¦¬
- âœ… **ê¹”ë”í•œ git íˆìŠ¤í† ë¦¬**: í•˜ë‚˜ì˜ ì˜ë¯¸ìˆëŠ” í†µí•© ì»¤ë°‹
- âœ… **ì›ì‘ì í¬ë ˆë”§ ë³´ì¡´**: ì»¤ë°‹ ë©”ì‹œì§€ì— ìƒì„¸ ê¸°ë¡
- âœ… **ë¹ ë¥¸ ì™„ë£Œ**: 2-3ì‹œê°„ ë‚´ ì™„ë£Œ
- âœ… **í–¥í›„ ë¨¸ì§• ë¬¸ì œ í•´ê²°**: `--onto` ì˜µì…˜ìœ¼ë¡œ ì™„ë²½ ëŒ€ì‘

### **ê¸°ë³¸ ì‹¤í–‰ ì ˆì°¨**

```bash
# 1. ì¤€ë¹„ ì‘ì—…
git fetch upstream
git checkout -b feature/cline-squash-merge
git tag backup-before-merge-$(date +%Y%m%d-%H%M%S)

# 2. Squash merge ì‹¤í–‰
git merge upstream/main --squash --strategy-option=theirs

# 3. Caret í˜¸í™˜ì„± ë³µì›
find proto/ -name "*.proto" -exec sed -i 's/package cline;/package caret;/g' {} \;
# caretApiKey, clineApiKey í•„ë“œ í™•ì¸ ë° ë³µì›
# "Cline Account" â†’ "Caret Account" ë¸Œëœë”© ìˆ˜ì •

# 4. í†µí•© ì»¤ë°‹ ìƒì„±
git add -A
git commit -m "Squash Merge: Cline v3.X.X â†’ v3.Y.Y

ğŸ¯ Major upgrade via squash merge strategy

âœ¨ Key Features Integrated:
- [ì£¼ìš” ê¸°ëŠ¥ 1]
- [ì£¼ìš” ê¸°ëŠ¥ 2]

ğŸ¯ Caret Customizations Preserved:
- Branding: Cline â†’ Caret throughout UI
- API Compatibility: caretApiKey, clineApiKey maintained
- Package namespace: proto package caret

ğŸ”„ Git History Strategy:
- Squash merge preserves all Cline changes in single commit
- Full Cline commit range: https://github.com/cline/cline/compare/v3.X.X...v3.Y.Y"

# 5. í–¥í›„ rebaseë¥¼ ìœ„í•œ ê¸°ì¤€ì  ì„¤ì •
git tag caret-squash-baseline-v3.Y.Y -m "Baseline for future rebase with --onto"

# 6. Main ë¸Œëœì¹˜ë¡œ í†µí•©
git checkout main
git merge feature/cline-squash-merge --no-ff
```

### **Squash Merge í›„ í–¥í›„ ì—…ë°ì´íŠ¸ í•´ê²°ì±…**

**ë¬¸ì œ**: ë‹¤ìŒ Cline ì—…ë°ì´íŠ¸ ì‹œ Gitì´ ê³µí†µ ì¡°ìƒì„ ì˜ëª» ì¸ì‹í•˜ì—¬ ì¶©ëŒ ë°œìƒ

**í•´ê²°**: `--onto` ì˜µì…˜ìœ¼ë¡œ ì •í™•í•œ ì»¤ë°‹ ë²”ìœ„ ì§€ì •

```bash
# ë‹¤ìŒ Cline ì—…ë°ì´íŠ¸ ì‹œ
git fetch upstream
git rebase --onto upstream/main caret-squash-baseline-v3.Y.Y

# ë˜ëŠ” HEAD ê¸°ì¤€ ë²”ìœ„ ì§€ì •
git rebase --onto upstream/main HEAD~[Caretë…ìì»¤ë°‹ìˆ˜]
```

**ì°¸ê³ **: [Git Squash and Merge í›„ Rebase ë¬¸ì œ í•´ê²°](https://tigris-data-science.tistory.com/entry/Git-Squash-and-Merge-%ED%9B%84-Rebase%EB%A5%BC-%ED%95%A0-%EB%95%8C-%EB%B0%9C%EC%83%9D%ED%95%98%EB%8A%94-%EB%AC%B8%EC%A0%9C)

---

## ğŸ¤– **AI ì‹œëŒ€ ì—ëŸ¬ ë¶„ì„ ì›ì¹™**

### **âš ï¸ ì§€ì—½ì  í•´ê²°ì˜ í•¨ì •**

```bash
âŒ ì˜ëª»ëœ ì ‘ê·¼:
"ì´ íŒŒì¼ì—ì„œ ì—ëŸ¬ê°€ ë‚¬ë„¤? ì´ íŒŒì¼ë§Œ ìˆ˜ì •í•˜ì"
"ì´ íƒ€ì… ì—ëŸ¬ë¥¼ ë¹ ë¥´ê²Œ ê³ ì¹˜ì"
"ì¼ë‹¨ ë¹Œë“œë§Œ ë˜ê²Œ í•˜ì"

âœ… ì˜¬ë°”ë¥¸ ì ‘ê·¼:
"ì´ ì—ëŸ¬ê°€ ë°œìƒí•œ ê·¼ë³¸ ì›ì¸ì€ ë¬´ì—‡ì¸ê°€?"
"ì´ ë¬¸ì œê°€ ë‹¤ë¥¸ ê³³ì—ë„ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•Šì„ê¹Œ?"
"ì „ì²´ ì•„í‚¤í…ì²˜ ê´€ì ì—ì„œ ì–´ë–¤ ì˜ë¯¸ì¸ê°€?"
```

### **ğŸ” 4ë‹¨ê³„ ì²´ê³„ì  ì—ëŸ¬ ë¶„ì„**

#### **1ë‹¨ê³„: ì›ì¸ ë¶„ì„ (Why?)**

- ì´ ì—ëŸ¬ê°€ ì™œ ë°œìƒí–ˆëŠ”ê°€?
- upstream ë³€ê²½ì‚¬í•­ ì¤‘ ì–´ë–¤ ë¶€ë¶„ì´ ì›ì¸ì¸ê°€?
- Caret ê³ ìœ  ì½”ë“œì™€ ì–´ë–»ê²Œ ì¶©ëŒí•˜ëŠ”ê°€?
- ê°œë³„ íŒŒì¼ ë¬¸ì œì¸ê°€, ì•„í‚¤í…ì²˜ ë¬¸ì œì¸ê°€?

**ë¶„ì„ ë„êµ¬:**

- 3-ë ˆí¬ ë¹„êµ: `main-caret` vs `cline-latest` vs í˜„ì¬ ìƒíƒœ
- `git blame`ìœ¼ë¡œ ë³€ê²½ ì´ë ¥ ì¶”ì 
- ê´€ë ¨ ì‹œìŠ¤í…œ(Proto/gRPC/WebView/API) ì‹ë³„

#### **2ë‹¨ê³„: ì˜í–¥ ë²”ìœ„ í™•ì¥ (What else?)**

- ë™ì¼í•œ íŒ¨í„´ì˜ ì—ëŸ¬ê°€ ë‹¤ë¥¸ íŒŒì¼ì—ë„ ìˆëŠ”ê°€?
- ê°™ì€ ì‹œìŠ¤í…œì˜ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì— ì˜í–¥ì€ ì—†ëŠ”ê°€?
- ì—°ê´€ëœ íƒ€ì…/ì¸í„°í˜ì´ìŠ¤ ë³€ê²½ì‚¬í•­ì€ ì—†ëŠ”ê°€?

**í™•ì¥ ë„êµ¬:**

- `grep`/`ripgrep`ë¡œ ìœ ì‚¬ íŒ¨í„´ ê²€ìƒ‰
- TypeScript ì»´íŒŒì¼ëŸ¬ ì „ì²´ ì—ëŸ¬ ë¦¬ìŠ¤íŠ¸ í™•ì¸
- ì˜ì¡´ì„± ê·¸ë˜í”„ ë¶„ì„

#### **3ë‹¨ê³„: ê²°ê³¼ ì˜ˆì¸¡ (What if?)**

- ì´ê²ƒë§Œ ìˆ˜ì •í•˜ë©´ ë‹¤ë¥¸ ê³³ì—ì„œ ì—ëŸ¬ê°€ ë‚ ê¹Œ?
- ê·¼ë³¸ ì›ì¸ì„ í•´ê²°í•˜ë©´ ì—¬ëŸ¬ ì—ëŸ¬ê°€ í•œë²ˆì— ì‚¬ë¼ì§ˆê¹Œ?
- ì„ì‹œ ìˆ˜ì • vs ê·¼ë³¸ í•´ê²°ì˜ ì¥ë‹¨ì ì€?

#### **4ë‹¨ê³„: ì „ëµì  í•´ê²° (How?)**

1. **êµ¬ì¡°ì  ë¬¸ì œ**: ì•„í‚¤í…ì²˜ë¶€í„° ì •ë¦¬
2. **í˜¸í™˜ì„± ë¬¸ì œ**: ë§¤í•‘/ì–´ëŒ‘í„° ë ˆì´ì–´ êµ¬ì¶•
3. **ë„¤ì´ë° ì¶©ëŒ**: ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì •ë¦¬
4. **ë²„ì „ ì°¨ì´**: ë‹¨ê³„ì  ë§ˆì´ê·¸ë ˆì´ì…˜

### **AI í˜‘ì—… ì›ì¹™**

#### **íš¨ê³¼ì ì¸ ì—ëŸ¬ ë³´ê³ **

```bash
âœ… ì¢‹ì€ ë³´ê³ :
"WebViewì—ì„œ AccountService ê´€ë ¨ TypeScript ì—ëŸ¬ 5ê°œê°€ ë°œìƒí–ˆëŠ”ë°,
 ëª¨ë‘ Organization ê´€ë ¨ íƒ€ì…ì´ ì—†ë‹¤ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤.
 Cline upstreamì—ì„œ Account ì‹œìŠ¤í…œì´ í™•ì¥ëœ ê²ƒ ê°™ì€ë°,
 ì „ì²´ì ìœ¼ë¡œ ì–´ë–»ê²Œ ì ‘ê·¼í•´ì•¼ í• ê¹Œìš”?"

âŒ ë‚˜ìœ ë³´ê³ :
"AccountView.tsx 47ì¤„ì—ì„œ ì—ëŸ¬ë‚˜ìš”. ê³ ì³ì£¼ì„¸ìš”."
```

#### **ì—­í•  ë¶„ë‹´**

```bash
ğŸ¤– AIê°€ ì˜í•˜ëŠ” ê²ƒ:
- íŒ¨í„´ ì¸ì‹ ë° ìœ ì‚¬ ë¬¸ì œ ì°¾ê¸°
- ëŒ€ëŸ‰ íŒŒì¼ ì¼ê´„ ìˆ˜ì •
- ì½”ë“œ ìƒì„± ë° ë¦¬íŒ©í† ë§

ğŸ‘¨â€ğŸ’» ì¸ê°„ì´ ì˜í•˜ëŠ” ê²ƒ:
- ì „ì²´ ì•„í‚¤í…ì²˜ ì„¤ê³„
- ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìš°ì„ ìˆœìœ„ ê²°ì •
- ì¥ê¸°ì  ì „ëµ ìˆ˜ë¦½
```

---

## ğŸ“‹ **ì‹¤í–‰ ê°€ì´ë“œ**

### **1. ì¤€ë¹„ ì‘ì—…**

#### **1.1 í™˜ê²½ ì„¤ì • (ìµœì´ˆ 1íšŒ)**

```bash
# Cline ì›ë³¸ ì €ì¥ì†Œë¥¼ upstreamìœ¼ë¡œ ì¶”ê°€
git remote add upstream https://github.com/cline/cline.git
git remote -v  # í™•ì¸
```

#### **1.2 ë³€ê²½ì‚¬í•­ ë¶„ì„**

```bash
# upstream ìµœì‹  ì •ë³´ ê°€ì ¸ì˜¤ê¸°
git fetch upstream

# ë³€ê²½ì‚¬í•­ í™•ì¸
git log --oneline main..upstream/main
git diff --name-only main upstream/main

# CHANGELOG ë¶„ì„ (ì¤‘ìš”!)
cp cline-latest/CHANGELOG.md CHANGELOG-cline.md
grep -A 10 "^## \[3\." CHANGELOG-cline.md | head -50
```

#### **1.3 ì‚­ì œëœ íŒŒì¼ í™•ì¸**

```bash
# Clineì—ì„œ ì‚­ì œëœ íŒŒì¼ í™•ì¸
git diff --name-only --diff-filter=D main upstream/main

# Caret ìˆ˜ì •ì‚¬í•­ í™•ì¸ í›„ ì²˜ë¦¬
git log --oneline --follow <ì‚­ì œëœ_íŒŒì¼_ê²½ë¡œ>
```

### **2. Squash Merge ì‹¤í–‰**

**í•µì‹¬ ì›ì¹™**: ìœ„ì˜ "Squash Merge ì „ëµ" ì„¹ì…˜ ì°¸ì¡°

### **3. Caret í˜¸í™˜ì„± ë³µì›**

#### **3.1 í•„ìˆ˜ ë¸Œëœë”© ë³µì›**

```bash
# Proto íŒ¨í‚¤ì§€ëª… ë³µì›
find proto/ -name "*.proto" -exec sed -i 's/package cline;/package caret;/g' {} \;

# UI ë¸Œëœë”© ë³µì› (ì£¼ìš” ìœ„ì¹˜)
grep -r "Cline Account" webview-ui/ --include="*.ts" --include="*.tsx"
# â†’ "Caret Account"ë¡œ ìˆ˜ì •

# API í‚¤ í•„ë“œ í™•ì¸
grep -r "clineApiKey\|caretApiKey" src/ --include="*.ts"
```

#### **3.2 Proto ì¬ìƒì„±**

```bash
npm run protos
npm run compile
```

### **4. ê²€ì¦ ì ˆì°¨**

#### **4.1 ë¹Œë“œ ê²€ì¦**

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
npm install
cd webview-ui && npm install && cd ..

# ì „ì²´ ë¹Œë“œ
npm run compile
npm run build:webview
npm run lint
```

#### **4.2 ê¸°ëŠ¥ ê²€ì¦**

```bash
# VSCode Extension Development Host í…ŒìŠ¤íŠ¸
# F5ë¡œ ë””ë²„ê·¸ ëª¨ë“œ ì‹¤í–‰

# í•µì‹¬ ê¸°ëŠ¥ í™•ì¸
- [ ] ìƒˆë¡œìš´ AI ëª¨ë¸ ì„ íƒ ê°€ëŠ¥
- [ ] Account ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ë™ì‘
- [ ] Caret ë¸Œëœë”© ì •ìƒ í‘œì‹œ
- [ ] ë‹¤êµ­ì–´ ì§€ì› ë™ì‘
```

---

## ğŸ› ï¸ **ì£¼ìš” ë¬¸ì œ í•´ê²°**

### **ì¶©ëŒ ìœ í˜•ë³„ í•´ê²° ì „ëµ**

#### **1. TypeScript íƒ€ì… ì—ëŸ¬**

```bash
# ë¬¸ì œ: Property 'newField' does not exist on type 'OldInterface'
# ì›ì¸: upstreamì—ì„œ Interface í™•ì¥
# í•´ê²°: Interface ì •ì˜ ì—…ë°ì´íŠ¸ + ì‚¬ìš©ì²˜ ìˆ˜ì • (any ìºìŠ¤íŒ… ê¸ˆì§€)
```

#### **2. gRPC ë©”ì„œë“œ í˜¸ì¶œ ì—ëŸ¬**

```bash
# ë¬¸ì œ: Method 'oldMethod' not found
# ì›ì¸: upstreamì—ì„œ gRPC ì„œë¹„ìŠ¤ ë³€ê²½
# í•´ê²°: Proto ì—…ë°ì´íŠ¸ + ìƒˆ ë©”ì„œë“œë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜ (ì£¼ì„ ì²˜ë¦¬ ê¸ˆì§€)
```

#### **3. Proto íŒ¨í‚¤ì§€ ì¶©ëŒ**

```bash
# ë¬¸ì œ: package cline vs package caret í˜¼ì¬
# í•´ê²°:
# - proto/cline/: Cline ì›ë³¸ ìœ ì§€ (package cline;)
# - proto/caret/: Caret ê³ ìœ  ê¸°ëŠ¥ (package caret;)
# - buf.yamlì— except ê·œì¹™ ì¶”ê°€
```

### **buf.yaml ì„¤ì • ìµœì í™”**

```yaml
version: v1
breaking:
    use:
        - FILE
    except:
        - PACKAGE_DIRECTORY_MATCH # CARET MODIFICATION: Allow package/directory mismatch
        - PACKAGE_SAME_DIRECTORY # CARET MODIFICATION: (caret package in cline directory)
lint:
    use:
        - DEFAULT
    except:
        - PACKAGE_DIRECTORY_MATCH
        - PACKAGE_SAME_DIRECTORY
```

### **Caret ê³ ìœ  í•„ë“œ ë²ˆí˜¸ ê´€ë¦¬**

```proto
// CARET MODIFICATION: Caret ê³ ìœ  í•„ë“œëŠ” 1000ë²ˆë¶€í„° ì‹œì‘
optional string caret_api_key = 1000;
optional string caret_custom_field = 1001;
// 1000-1999: Caret ì „ìš© ë²”ìœ„
```

---

## ğŸ“š **ì°¸ê³  ìë£Œ**

### **ìë™í™” ë„êµ¬**

#### **ì¶©ëŒ í•´ê²° ìŠ¤í¬ë¦½íŠ¸**

```bash
# Python ìŠ¤í¬ë¦½íŠ¸ (í¬ë¡œìŠ¤ í”Œë«í¼)
python3 caret-scripts/merging-task/merge-conflict-resolver.py <file_path> caret

# ëª¨ë“  ì¶©ëŒ íŒŒì¼ ì¼ê´„ ì²˜ë¦¬
find . -name "*.orig" -delete
git status --porcelain | grep "^UU" | cut -c4- | \
  xargs -I {} python3 caret-scripts/merging-task/merge-conflict-resolver.py {} caret
```

#### **ì°¨ì´ì  ë¶„ì„ ë„êµ¬**

```bash
# 3-ë ˆí¬ ë¹„êµ ë¶„ì„
node caret-scripts/merging-task/analyze-merge-differences.js

# íŠ¹ì • íŒŒì¼ë§Œ ë¶„ì„
node caret-scripts/merging-task/analyze-merge-differences.js --file src/shared/api.ts
```

### **ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ê²€ì¦**

```bash
# ë³‘í•© ì „í›„ ê²€ì¦
npm test -- --testNamePattern="ClineFeatureValidator"

# 25ê°œ í…ŒìŠ¤íŠ¸ ëª¨ë‘ í†µê³¼ í™•ì¸ í•„ìˆ˜
```

### **ë³µêµ¬ ë°©ë²•**

```bash
# ë³‘í•© ì·¨ì†Œ (ë³‘í•© ì§í›„)
git reset --hard HEAD~1

# íŠ¹ì • ì»¤ë°‹ìœ¼ë¡œ ë˜ëŒë¦¬ê¸°
git reset --hard <commit_hash>

# ì•ˆì „í•œ ë¸Œëœì¹˜ì—ì„œ í…ŒìŠ¤íŠ¸
git checkout -b test-merge
# í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„ mainì— ì ìš©
```

---

## ğŸš¨ **ì¤‘ìš” ì²´í¬ë¦¬ìŠ¤íŠ¸**

### **ë¨¸ì§• ì „ í•„ìˆ˜ í™•ì¸**

- [ ] `git fetch upstream` ì™„ë£Œ
- [ ] CHANGELOG.md ë¶„ì„ ì™„ë£Œ
- [ ] ë°±ì—… íƒœê·¸ ìƒì„± ì™„ë£Œ
- [ ] ì‘ì—… ë¸Œëœì¹˜ ìƒì„± ì™„ë£Œ

### **ë¨¸ì§• í›„ í•„ìˆ˜ ê²€ì¦**

- [ ] `npm run compile` ì„±ê³µ
- [ ] `npm run build:webview` ì„±ê³µ
- [ ] `npm run lint` ì„±ê³µ
- [ ] F5 ë””ë²„ê·¸ ëª¨ë“œ ì •ìƒ ë™ì‘
- [ ] ìƒˆ ê¸°ëŠ¥ ë™ì‘ í™•ì¸
- [ ] Caret ë¸Œëœë”© ì •ìƒ í‘œì‹œ

### **ì™„ë£Œ í›„ ì •ë¦¬**

- [ ] `.cline` ë°±ì—… íŒŒì¼ ì—…ë°ì´íŠ¸
- [ ] ë¶ˆí•„ìš”í•œ ë°±ì—… íŒŒì¼ ì •ë¦¬
- [ ] ë¨¸ì§• ê²°ê³¼ ë¬¸ì„œí™”
- [ ] ë‹¤ìŒ ë¨¸ì§•ì„ ìœ„í•œ íƒœê·¸ ìƒì„±

---

**ì‘ì„±ì**: Alpha Yang (AI Assistant)  
**ê²€í† ì**: Luke (Project Owner)  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-08-12  
**ë²„ì „**: v3.0 (AI ì‹œëŒ€ ìµœì í™”)
