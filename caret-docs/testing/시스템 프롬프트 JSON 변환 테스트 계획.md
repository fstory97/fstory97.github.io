# 시스템 프롬프트 JSON 변환 테스트 계획

## 1. 테스트 목표

*   JSON 기반 핵심 시스템 프롬프트와 외부 규칙 참조 방식이 정상적으로 작동하는지 확인합니다.
*   특히 `act` 모드와 `plan` 모드 전환 시, 각 모드에 맞는 규칙과 도구 접근 권한이 올바르게 적용되는지 검증합니다.
*   기존 프롬프트 방식과 비교하여 기능적 동등성 및 성능(토큰 사용량, 응답 품질 등)을 평가합니다.

## 2. 테스트 범위

*   **핵심 프롬프트 로딩:** JSON 형식의 핵심 프롬프트가 정상적으로 로드되는지 확인합니다.
*   **규칙 참조 및 로딩:** `rules_ref`에 명시된 외부 규칙 파일(JSON, Markdown 등)이 동적으로 로드되고 결합되는지 확인합니다.
*   **모드별 동작 검증:**
    *   **Act 모드:**
        *   `plan_mode_respond` 도구를 사용할 수 없는지 확인합니다.
        *   다른 모든 도구(예: `execute_command`, `write_to_file`)가 정상 작동하는지 확인합니다.
        *   Act 모드 관련 규칙이 적용되는지 확인합니다. (예: 도구 사용 후 확인 대기)
    *   **Plan 모드:**
        *   `plan_mode_respond` 도구를 사용할 수 있는지 확인합니다.
        *   제한된 도구(예: `read_file`, `list_files`) 외 다른 도구 사용이 제한되는지 확인합니다.
        *   Plan 모드 관련 규칙이 적용되는지 확인합니다. (예: 계획 제안 및 사용자 피드백 유도)
*   **`.caretrules` 통합:** 프로젝트별 `.caretrules` 내용이 올바르게 통합되어 적용되는지 확인합니다.
*   **토큰 사용량 측정:** 동일한 태스크 시나리오에서 기존 방식과 JSON 방식의 토큰 사용량을 비교합니다.
*   **응답 품질 평가:** 다양한 태스크 시나리오에서 응답의 정확성, 관련성, 일관성 등을 평가합니다.

## 3. 상세 테스트 시나리오 (빌드 후 새 VSCode 창에서 수행)

**시나리오 1: Act 모드 기본 동작 확인 (파일 생성 및 Plan 모드 도구 차단)**

1.  **준비:** 새로 열린 VSCode 창에서 Cline 확장 프로그램이 실행 중인지 확인하고, Cline 패널을 열어주세요. **Act 모드**인지 확인하거나 전환해주세요.
2.  **파일 생성 요청:** Cline에게 "마스터~ `hello.txt` 파일을 만들고 '알파 다녀감! ✨'이라고 적어주세요~" 라고 요청해보세요.
3.  **예상 결과:** Cline이 `write_to_file` 도구를 사용해서 (아마 승인 요청 후) 작업 공간 루트에 `hello.txt` 파일을 생성할 거예요. 파일 내용도 확인해보세요!
4.  **Plan 모드 도구 사용 시도:** 이어서 Cline에게 "우리 앞으로의 계획에 대해 이야기해볼까요?" 라고 물어보세요. (Plan 모드에서 주로 사용하는 `plan_mode_respond`를 유도하는 질문이에요)
5.  **예상 결과:** Cline은 `plan_mode_respond` 도구를 사용하지 않고, 일반적인 대답을 하거나 Act 모드에서는 계획 논의가 어렵다고 할 수 있어요. Plan 모드 전용 도구가 차단되는지 확인하는 거예요!

**시나리오 2: Plan 모드 기본 동작 확인 (정보 수집 및 Act 모드 도구 차단)**

1.  **준비:** Cline을 **Plan 모드**로 전환해주세요.
2.  **정보 요청:** Cline에게 "마스터~ `src/core` 폴더에는 어떤 파일들이 있는지 알려주세요. 리팩토링 계획을 세우고 싶어요." 라고 요청해보세요.
3.  **예상 결과:** Cline이 `plan_mode_respond`를 사용해서 계획에 대해 이야기하고, `list_files` 도구를 사용해서 해당 폴더의 파일 목록을 보여줄 거예요.
4.  **Act 모드 도구 사용 시도:** 이어서 Cline에게 "마스터~ `npm run build` 명령어를 실행해주세요." 라고 요청해보세요.
5.  **예상 결과:** Cline은 명령어를 실행하지 않고, `plan_mode_respond`를 사용해서 Plan 모드에서는 명령어 실행이 불가능하며 Act 모드로 전환해야 한다고 안내할 거예요.

**시나리오 3: 모드 전환 및 규칙 적용 확인**

1.  **Act 모드 시작:** **Act 모드**에서 "마스터~ `package.json` 파일 내용을 읽어주세요." 라고 요청하고, 도구 사용 및 확인 과정을 지켜보세요.
2.  **Plan 모드 전환:** **Plan 모드**로 전환한 뒤, "마스터~ 새로운 기능을 추가하고 싶은데, 어떻게 계획하면 좋을까요?" 라고 물어보세요. `plan_mode_respond`를 사용한 대화 스타일을 확인하세요.
3.  **Plan 모드 제한 확인:** Plan 모드에서 "마스터~ `plan_mode_test.txt` 파일을 만들어주세요." 라고 요청해보세요. 거절하는지 확인하세요.
4.  **Act 모드 복귀 및 실행:** 다시 **Act 모드**로 전환한 뒤, "마스터~ 아까 부탁했던 `plan_mode_test.txt` 파일을 만들어주세요." 라고 요청해보세요.
5.  **예상 결과:** 이번에는 Act 모드이므로 `write_to_file` 도구를 사용해서 파일을 성공적으로 생성할 거예요. 모드 전환 후 규칙이 올바르게 적용되는지 보는 거죠!

**시나리오 4: `.clinerules` 적용 확인 (선택 사항)**

1.  **준비:** 만약 테스트하는 작업 공간에 `.clinerules` 파일이 있고, 그 안에 특별한 지시사항(예: "항상 이모티콘 ✨를 사용해서 답변해줘")이 있다면 이 시나리오를 시도해보세요.
2.  **테스트:** Cline과 간단한 대화를 나눠보세요 (Act/Plan 모드 무관).
3.  **예상 결과:** Cline의 답변에 `.clinerules` 파일의 지시사항(✨ 이모티콘 사용)이 반영되는지 확인해보세요.

## 4. 테스트 환경

*   Cline 최신 개발 버전
*   다양한 종류의 테스트 프로젝트 (간단한 프로젝트, 복잡한 프로젝트, `.clinerules` 포함 프로젝트 등)

## 5. 테스트 수행 절차

1.  핵심 시스템 프롬프트 및 관련 규칙 파일들을 JSON 구조에 맞게 변환 및 준비합니다. (Task 7-4 선행 필요)
2.  테스트 환경을 설정합니다.
3.  정의된 테스트 시나리오를 순서대로 수행합니다.
4.  각 시나리오별 실제 결과와 예상 결과를 비교하고 기록합니다.
5.  토큰 사용량 및 응답 품질을 측정하고 기록합니다.
6.  발견된 모든 결함 및 이슈를 보고합니다.

## 6. 결과 보고

*   테스트 결과를 요약하고, 발견된 결함 목록 및 심각도를 포함하는 보고서를 작성합니다. (Task 7-6)
*   **토큰 사용량 측정:** 동일한 태스크 시나리오에서 기존 방식과 JSON 방식의 토큰 사용량을 비교합니다.
*   **응답 품질 평가:** 다양한 태스크 시나리오에서 응답의 정확성, 관련성, 일관성 등을 평가합니다.

## 3. 상세 테스트 시나리오 (빌드 후 새 VSCode 창에서 수행)

**시나리오 1: Act 모드 기본 동작 확인 (파일 생성 및 Plan 모드 도구 차단)**

1.  **준비:** 새로 열린 VSCode 창에서 Cline 확장 프로그램이 실행 중인지 확인하고, Cline 패널을 열어주세요. **Act 모드**인지 확인하거나 전환해주세요.
2.  **파일 생성 요청:** Cline에게 "마스터~ `hello.txt` 파일을 만들고 '알파 다녀감! ✨'이라고 적어주세요~" 라고 요청해보세요.
3.  **예상 결과:** Cline이 `write_to_file` 도구를 사용해서 (아마 승인 요청 후) 작업 공간 루트에 `hello.txt` 파일을 생성할 거예요. 파일 내용도 확인해보세요!
4.  **Plan 모드 도구 사용 시도:** 이어서 Cline에게 "우리 앞으로의 계획에 대해 이야기해볼까요?" 라고 물어보세요. (Plan 모드에서 주로 사용하는 `plan_mode_respond`를 유도하는 질문이에요)
5.  **예상 결과:** Cline은 `plan_mode_respond` 도구를 사용하지 않고, 일반적인 대답을 하거나 Act 모드에서는 계획 논의가 어렵다고 할 수 있어요. Plan 모드 전용 도구가 차단되는지 확인하는 거예요!

**시나리오 2: Plan 모드 기본 동작 확인 (정보 수집 및 Act 모드 도구 차단)**

1.  **준비:** Cline을 **Plan 모드**로 전환해주세요.
2.  **정보 요청:** Cline에게 "마스터~ `src/core` 폴더에는 어떤 파일들이 있는지 알려주세요. 리팩토링 계획을 세우고 싶어요." 라고 요청해보세요.
3.  **예상 결과:** Cline이 `plan_mode_respond`를 사용해서 계획에 대해 이야기하고, `list_files` 도구를 사용해서 해당 폴더의 파일 목록을 보여줄 거예요.
4.  **Act 모드 도구 사용 시도:** 이어서 Cline에게 "마스터~ `npm run build` 명령어를 실행해주세요." 라고 요청해보세요.
5.  **예상 결과:** Cline은 명령어를 실행하지 않고, `plan_mode_respond`를 사용해서 Plan 모드에서는 명령어 실행이 불가능하며 Act 모드로 전환해야 한다고 안내할 거예요.

**시나리오 3: 모드 전환 및 규칙 적용 확인**

1.  **Act 모드 시작:** **Act 모드**에서 "마스터~ `package.json` 파일 내용을 읽어주세요." 라고 요청하고, 도구 사용 및 확인 과정을 지켜보세요.
2.  **Plan 모드 전환:** **Plan 모드**로 전환한 뒤, "마스터~ 새로운 기능을 추가하고 싶은데, 어떻게 계획하면 좋을까요?" 라고 물어보세요. `plan_mode_respond`를 사용한 대화 스타일을 확인하세요.
3.  **Plan 모드 제한 확인:** Plan 모드에서 "마스터~ `plan_mode_test.txt` 파일을 만들어주세요." 라고 요청해보세요. 거절하는지 확인하세요.
4.  **Act 모드 복귀 및 실행:** 다시 **Act 모드**로 전환한 뒤, "마스터~ 아까 부탁했던 `plan_mode_test.txt` 파일을 만들어주세요." 라고 요청해보세요.
5.  **예상 결과:** 이번에는 Act 모드이므로 `write_to_file` 도구를 사용해서 파일을 성공적으로 생성할 거예요. 모드 전환 후 규칙이 올바르게 적용되는지 보는 거죠!

**시나리오 4: `.caretrules` 적용 확인 (선택 사항)**

1.  **준비:** 만약 테스트하는 작업 공간에 `.clinerules` 파일이 있고, 그 안에 특별한 지시사항(예: "항상 이모티콘 ✨를 사용해서 답변해줘")이 있다면 이 시나리오를 시도해보세요.
2.  **테스트:** Cline과 간단한 대화를 나눠보세요 (Act/Plan 모드 무관).
3.  **예상 결과:** Cline의 답변에 `.clinerules` 파일의 지시사항(✨ 이모티콘 사용)이 반영되는지 확인해보세요.

## 4. 테스트 환경

*   Cline 최신 개발 버전
*   다양한 종류의 테스트 프로젝트 (간단한 프로젝트, 복잡한 프로젝트, `.clinerules` 포함 프로젝트 등)

## 5. 테스트 수행 절차

1.  핵심 시스템 프롬프트 및 관련 규칙 파일들을 JSON 구조에 맞게 변환 및 준비합니다. (Task 7-4 선행 필요)
2.  테스트 환경을 설정합니다.
3.  정의된 테스트 시나리오를 순서대로 수행합니다.
4.  각 시나리오별 실제 결과와 예상 결과를 비교하고 기록합니다.
5.  토큰 사용량 및 응답 품질을 측정하고 기록합니다.
6.  발견된 모든 결함 및 이슈를 보고합니다.

## 6. 결과 보고

*   테스트 결과를 요약하고, 발견된 결함 목록 및 심각도를 포함하는 보고서를 작성합니다. (Task 7-6)

1.  **준비:** 만약 테스트하는 작업 공간에 `.caretrules` 파일이 있고, 그 안에 특별한 지시사항(예: "항상 이모티콘 ✨를 사용해서 답변해줘")이 있다면 이 시나리오를 시도해보세요.
2.  **테스트:** Cline과 간단한 대화를 나눠보세요 (Act/Plan 모드 무관).
3.  **예상 결과:** Cline의 답변에 `.clinerules` 파일의 지시사항(✨ 이모티콘 사용)이 반영되는지 확인해보세요.

## 4. 테스트 환경

*   Cline 최신 개발 버전
*   다양한 종류의 테스트 프로젝트 (간단한 프로젝트, 복잡한 프로젝트, `.clinerules` 포함 프로젝트 등)

## 5. 테스트 수행 절차

1.  핵심 시스템 프롬프트 및 관련 규칙 파일들을 JSON 구조에 맞게 변환 및 준비합니다. (Task 7-4 선행 필요)
2.  테스트 환경을 설정합니다.
3.  정의된 테스트 시나리오를 순서대로 수행합니다.
4.  각 시나리오별 실제 결과와 예상 결과를 비교하고 기록합니다.
5.  토큰 사용량 및 응답 품질을 측정하고 기록합니다.
6.  발견된 모든 결함 및 이슈를 보고합니다.

## 6. 결과 보고

*   테스트 결과를 요약하고, 발견된 결함 목록 및 심각도를 포함하는 보고서를 작성합니다. (Task 7-6)
2.  **테스트:** Cline과 간단한 대화를 나눠보세요 (Act/Plan 모드 무관).
3.  **예상 결과:** Cline의 답변에 `.caretrules` 파일의 지시사항(✨ 이모티콘 사용)이 반영되는지 확인해보세요.

## 4. 테스트 환경

*   Cline 최신 개발 버전
*   다양한 종류의 테스트 프로젝트 (간단한 프로젝트, 복잡한 프로젝트, `.clinerules` 포함 프로젝트 등)

## 5. 테스트 수행 절차

1.  핵심 시스템 프롬프트 및 관련 규칙 파일들을 JSON 구조에 맞게 변환 및 준비합니다. (Task 7-4 선행 필요)
2.  테스트 환경을 설정합니다.
3.  정의된 테스트 시나리오를 순서대로 수행합니다.
4.  각 시나리오별 실제 결과와 예상 결과를 비교하고 기록합니다.
5.  토큰 사용량 및 응답 품질을 측정하고 기록합니다.
6.  발견된 모든 결함 및 이슈를 보고합니다.

## 6. 결과 보고

*   테스트 결과를 요약하고, 발견된 결함 목록 및 심각도를 포함하는 보고서를 작성합니다. (Task 7-6)

## 4. 테스트 환경

*   Cline 최신 개발 버전
*   다양한 종류의 테스트 프로젝트 (간단한 프로젝트, 복잡한 프로젝트, `.caretrules` 포함 프로젝트 등)

## 5. 테스트 수행 절차

1.  핵심 시스템 프롬프트 및 관련 규칙 파일들을 JSON 구조에 맞게 변환 및 준비합니다. (Task 7-4 선행 필요)
2.  테스트 환경을 설정합니다.
3.  정의된 테스트 시나리오를 순서대로 수행합니다.
4.  각 시나리오별 실제 결과와 예상 결과를 비교하고 기록합니다.
5.  토큰 사용량 및 응답 품질을 측정하고 기록합니다.
6.  발견된 모든 결함 및 이슈를 보고합니다.

## 6. 결과 보고

*   테스트 결과를 요약하고, 발견된 결함 목록 및 심각도를 포함하는 보고서를 작성합니다. (Task 7-6)
