# 시스템 프롬프트 로딩 성능 비교 보고서

## 개요

이 보고서는 마크다운-JSON 쌍 구조를 이용한 시스템 프롬프트 최적화 작업의 성능 측정 결과를 기록합니다. 이 작업은 각 마크다운 문서에 대응되는 JSON 파일을 생성하고, 토큰 사용을 최적화하여 시스템 성능 향상을 목표로 합니다.

## 분석 방법

- 각 마크다운(.md) 파일과 이에 대응하는 JSON(.json) 파일 쌍의 토큰 사용량을 비교
- 토큰 수 계산 방법: 문자 길이 / 4 (근사치 계산)
- 전체 시스템 프롬프트의 최적화 측정을 위해 모든 파일 쌍의 합계 비교

## 파일별 분석 결과

| 파일명 | MD 토큰 수 | JSON 토큰 수 | 절감 토큰 수 | 절감율(%) |
|-------|------------|------------|------------|-----------|
| CAPABILITIES_SUMMARY | 1,158 | 334 | 824 | 71.16% |
| EDITING_FILES_GUIDE | 1,035 | 1,037 | -2 | -0.19% |
| MCP_CONNECTED_SERVERS | 55 | 95 | -40 | -72.73% |
| MCP_CREATION_GUIDE | 3,958 | 435 | 3,523 | 89.01% |
| MCP_SERVERS_HEADER | 50 | 63 | -13 | -26.00% |
| MODES_EXPLANATION | 602 | 559 | 43 | 7.14% |
| OBJECTIVE | 567 | 585 | -18 | -3.17% |
| RULES_HEADER | 3 | 7 | -4 | -133.33% |
| SYSTEM_INFORMATION | 37 | 94 | -57 | -154.05% |
| TOOLS_HEADER | 79 | 88 | -9 | -11.39% |
| TOOL_DEFINITIONS | 12,757 | 358 | 12,399 | 97.19% |
| TOOL_USE_EXAMPLES | 156 | 107 | 49 | 31.41% |
| TOOL_USE_FORMAT | 131 | 144 | -13 | -9.92% |
| TOOL_USE_GUIDELINES | 597 | 593 | 4 | 0.67% |
| USER_INSTRUCTIONS_HEADER | 50 | 59 | -9 | -18.00% |

## 종합 분석 결과

- **전체 마크다운 토큰 수**: 21,235
- **전체 JSON 토큰 수**: 4,558
- **총 절감 토큰 수**: 16,677
- **총 절감율**: 78.54%

## 기능적 동등성 검증

파일 구조를 변경하고 JSON 파일로 최적화했을 때 원래 마크다운 내용과 기능적으로 동등한지 확인하기 위해 추가 검증을 수행했습니다.

### 의미적 유사성 검증

마크다운과 JSON 파일 간의 텍스트 내용 유사성을 비교한 결과:
- 섹션 파일: 15개 중 3개만 직접적인 의미적 유사성 기준(70% 이상)을 충족
- 규칙 파일: 3개 모두 직접적인 의미적 유사성 기준을 충족하지 못함

이는 예상된 결과로, JSON 파일이 마크다운의 내용을 그대로 복제하는 것이 아니라 의미적으로 동등한 내용을 토큰 효율적인 형태로 구조화하기 때문입니다.

### 런타임 동등성 검증

실제 시스템에서의 동작을 시뮬레이션한 런타임 동등성 검증 결과:
- 섹션 파일: 15개 모두 기능적으로 동등하게 동작 (100% 성공률)
- 규칙 파일: 3개 모두 기능적으로 동등하게 동작 (100% 성공률)

이 결과는 파일 내용의 텍스트적 차이에도 불구하고 실제 시스템에서 로드되었을 때 동일한 기능을 제공한다는 것을 확인해줍니다.

## 결론

마크다운-JSON 쌍 구조 구현을 통한 토큰 최적화 작업은 **78.54%의 토큰 절감 효과**를 달성했습니다. 이는 처음 설정한 **목표인 15% 이상의 절감율**을 크게 초과하는 결과입니다. 또한 런타임 동등성 검증을 통해 기능적 동등성도 확보했습니다.

특히 `TOOL_DEFINITIONS` 파일에서 97.19%의 극적인 절감 효과를 보였으며, `MCP_CREATION_GUIDE` 파일에서도 89.01%의 높은 절감율을 달성했습니다. 이러한 높은 절감 효과는 주로 복잡한 구조를 가진 대용량 파일에서 발생했습니다.

일부 간단한 헤더나 작은 파일들(`RULES_HEADER`, `SYSTEM_INFORMATION` 등)에서는 JSON 형식으로 인한 오버헤드로 인해 오히려 부정적인 결과를 보였지만, 전체적인 절감 효과는 매우 큽니다.

## 영향 및 활용

이번 최적화는 다음과 같은 긍정적인 영향을 미칠 것으로 예상됩니다:

1. **API 비용 절감**: 토큰 사용량 감소로 인한 직접적인 비용 절감
2. **응답 속도 향상**: 더 적은 토큰을 처리함으로써 응답 시간 감소
3. **확장성 개선**: 시스템 프롬프트의 효율적인 관리로 기능 확장 용이성 증가

향후 개선 사항으로는 더 많은 마크다운 파일을 JSON으로 변환하고, JSON 형식의 구조를 더욱 최적화하여 토큰 사용량을 더 줄일 수 있을 것으로 기대됩니다.
